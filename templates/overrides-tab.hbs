{{!--
  Overrides Tab Content
--}}
<div class="tab-panel overrides-section {{#if isOverridesTab}}active{{/if}}">
  <div class="tables-content">
    {{#if hasTargets}}
      {{!-- Bulk Override Actions --}}
      <div class="overrides-header">
        {{!-- State Selection Row --}}
        <div class="bulk-actions">
          <label>Select Override State:</label>
          <div class="bulk-state-buttons">
            {{#each visibilityStates as |state|}}
              <button type="button" class="bulk-state-header state-selector-button {{state.cssClass}}" data-action="toggleStateSelector" data-state="{{state.value}}" data-tooltip="{{state.label}}">
                <i class="{{state.icon}}"></i>
              </button>
            {{/each}}
            <button type="button" class="bulk-state-header state-selector-button no-override" data-action="toggleStateSelector" data-state="no-override" data-tooltip="No Override">
              <i class="fas fa-ban"></i>
            </button>
          </div>
        </div>
        
        {{!-- Action Application Row --}}
        <div class="bulk-actions">
          <label>Apply to PCs:</label>
          <div class="bulk-action-buttons">
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="visibility" data-target-type="pc" data-tooltip="Apply selected state to all PC visibility overrides">
              <i class="fas fa-eye"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="seek" data-target-type="pc" data-tooltip="Apply selected state to all PC seek overrides">
              <i class="fas fa-search"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="hide" data-target-type="pc" data-tooltip="Apply selected state to all PC hide overrides">
              <i class="fas fa-mask"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="sneak" data-target-type="pc" data-tooltip="Apply selected state to all PC sneak overrides">
              <i class="fas fa-user-ninja"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="createDiversion" data-target-type="pc" data-tooltip="Apply selected state to all PC create diversion overrides">
              <i class="fas fa-theater-masks"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="attackConsequences" data-target-type="pc" data-tooltip="Apply selected state to all PC attack consequence overrides">
              <i class="fas fa-crosshairs"></i>
            </button>
          </div>
        </div>
        
        {{!-- NPC Action Application Row --}}
        <div class="bulk-actions">
          <label>Apply to NPCs:</label>
          <div class="bulk-action-buttons">
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="visibility" data-target-type="npc" data-tooltip="Apply selected state to all NPC visibility overrides">
              <i class="fas fa-eye"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="seek" data-target-type="npc" data-tooltip="Apply selected state to all NPC seek overrides">
              <i class="fas fa-search"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="hide" data-target-type="npc" data-tooltip="Apply selected state to all NPC hide overrides">
              <i class="fas fa-mask"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="sneak" data-target-type="npc" data-tooltip="Apply selected state to all NPC sneak overrides">
              <i class="fas fa-user-ninja"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="createDiversion" data-target-type="npc" data-tooltip="Apply selected state to all NPC create diversion overrides">
              <i class="fas fa-theater-masks"></i>
            </button>
            <button type="button" class="bulk-state-header" data-action="bulkSetOverride" data-override-action="attackConsequences" data-target-type="npc" data-tooltip="Apply selected state to all NPC attack consequence overrides">
              <i class="fas fa-crosshairs"></i>
            </button>
          </div>
        </div>
        
        {{!-- Clear All Button --}}
        <div class="clear-actions">
          <button type="button" class="clear-all-overrides" data-action="clearAllOverrides" data-tooltip="Clear all override settings">
            <i class="fas fa-eraser"></i>
            Clear
          </button>
        </div>
      </div>

      {{!-- Player Characters Table --}}
      {{#if hasPCs}}
        <div class="table-section overrides-section">
          <div class="table-section-header">
            <div class="header-left">
              <i class="fas fa-users"></i>
              <span>Player Characters</span>
            </div>
            <div class="bulk-actions-header">
              <button type="button" class="clear-target-overrides" data-action="clearTargetTypeOverrides" data-target-type="pc" data-tooltip="Clear all PC overrides">
                <i class="fas fa-eraser"></i>
              </button>
            </div>
          </div>
          {{> "pf2e-visioner.overrides-table" tokens=pcTargets sectionType="pc"}}
        </div>
      {{/if}}

      {{!-- NPCs Table --}}
      {{#if hasNPCs}}
        <div class="table-section overrides-section">
          <div class="table-section-header">
            <div class="header-left">
              <i class="fas fa-dragon"></i>
              <span>NPCs</span>
            </div>
            <div class="bulk-actions-header">
              <button type="button" class="clear-target-overrides" data-action="clearTargetTypeOverrides" data-target-type="npc" data-tooltip="Clear all NPC overrides">
                <i class="fas fa-eraser"></i>
              </button>
            </div>
          </div>
          {{> "pf2e-visioner.overrides-table" tokens=npcTargets sectionType="npc"}}
        </div>
      {{/if}}
      
    {{else}}
      <div class="no-targets">
        <p>{{localize "PF2E_VISIONER.TOKEN_MANAGER.NO_TOKENS"}}</p>
      </div>
    {{/if}}
  </div>
</div>